jQuery(function(t){function a(){var a=t(".nplist");t(".page-row").removeClass("no-border"),t.each(a,function(){t(this).find(".page-row:visible:first").addClass("no-border")})}function e(){var a=t(".nestedpages").find(".nplist");t.each(a,function(){var a=t(this).parents(".nplist").length,e=56;if(a>0){var e=20*a+e;t(this).find(".row-inner").css("padding-left",e+"px")}else t(this).find(".row-inner").css("padding-left","0px")})}function n(){var a=t(".sortable").attr("id");return a.substring(3)}function s(a){var e=1;return t.each(nestedpages.post_types,function(t,n){n.name===a&&n.hierarchical===!0&&(e=0)}),e}function d(a){if(0===s(n())){var e=t(a.placeholder).parents("ol").length,i=t(".sortable").width(),d=40*e-40,r=i-d;t(a.placeholder).width(r).css("margin-left",d+"px")}o(a)}function o(a){var e=t(a.placeholder).parent("ol");t(e).is(":visible")||(t(e).addClass("nplist"),t(e).show())}function r(){t(".child-toggle").each(function(){var a=t(this).parent(".row").parent("li");if(t(a).children("ol").length>0){var e=t(a).children("ol:visible").length>0?"np-icon-arrow-down":"np-icon-arrow-right";t(this).html('<a href="#"><i class="'+e+'"></i></a>')}else t(this).empty()})}function l(){t("#np-error").hide(),t("#nested-loading").show();var a=t(".np-sync-menu").is(":checked")?"sync":"nosync";list=t("ol.sortable").nestedSortable("toHierarchy",{startDepthCount:0}),t.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:"npsort",nonce:nestedpages.np_nonce,list:list,post_type:n(),syncmenu:a},success:function(a){"error"===a.status?(t("#np-error").text(a.message).show(),t("#nested-loading").hide()):t("#nested-loading").hide()}})}function p(a){t.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:"npsyncMenu",nonce:nestedpages.np_nonce,post_type:n(),syncmenu:a},success:function(t){"error"===t.status&&alert("There was an error saving the sync setting.")}})}function c(a){var e={id:t(a).attr("data-id"),title:t(a).attr("data-title"),slug:t(a).attr("data-slug"),author:t(a).attr("data-author"),cs:t(a).attr("data-commentstatus"),status:t(a).attr("data-status"),template:t(a).attr("data-template"),month:t(a).attr("data-month"),day:t(a).attr("data-day"),year:t(a).attr("data-year"),hour:t(a).attr("data-hour"),minute:t(a).attr("data-minute"),navstatus:t(a).attr("data-navstatus"),npstatus:t(a).attr("data-np-status"),navtitle:t(a).attr("data-navtitle"),navtitleattr:t(a).attr("data-navtitleattr"),navcss:t(a).attr("data-navcss"),linktarget:t(a).attr("data-linktarget"),password:t(a).attr("data-password"),datepicker:t(a).attr("data-datepicker"),time:t(a).attr("data-formattedtime"),ampm:t(a).attr("data-ampm")},n=t(a).closest(".row").parent("li");e.h_taxonomies=[],e.f_taxonomies=[];var s=t(n).attr("class").split(/\s+/);for(i=0;i<s.length;i++)"in-"===s[i].substring(0,3)&&e.h_taxonomies.push(s[i]),"inf-"===s[i].substring(0,4)&&e.f_taxonomies.push(s[i]);if(t(n).children("ol").length>0)var d=t(n).children("ol"),o=t(".quick-edit-form").clone().insertBefore(d);else var o=t(".quick-edit-form").clone().appendTo(n);t(o).siblings(".row").hide();u(o,e)}function u(a,e){if(t(a).find(".page_id").html("<em>ID:</em> "+e.id),t(a).find(".np_id").val(e.id),t(a).find(".np_title").val(e.title),t(a).find(".np_slug").val(e.slug),t(a).find(".np_author select").val(e.author),t(a).find(".np_status").val(e.status),t(a).find(".np_nav_title").val(e.navtitle),t(a).find(".np_title_attribute").val(e.navtitleattr),t(a).find(".np_nav_css_classes").val(e.navcss),t(a).find(".post_password").val(e.password),t(a).find(".np_datepicker").val(e.datepicker),t(a).find(".np_time").val(e.time),t(a).find(".np_ampm").val(e.ampm),"open"===e.cs&&t(a).find(".np_cs").prop("checked","checked"),t(a).find(".np_template").val(""!==e.template?e.template:"default"),"private"===e.status&&(t(a).find(".post_password").prop("readonly",!0),t(a).find(".keep_private").prop("checked",!0)),"hide"===e.npstatus?t(a).find(".np_status").prop("checked","checked"):t(a).find(".np_status").removeAttr("checked"),"hide"===e.navstatus?t(a).find(".np_nav_status").prop("checked","checked"):t(a).find(".np_nav_status").removeAttr("checked"),"_blank"===e.linktarget?t(a).find(".link_target").prop("checked","checked"):t(a).find(".link_target").removeAttr("checked"),"private"===e.status&&t(a).find(".np_status").val("publish"),t(a).find('select[name="mm"]').val(e.month),t(a).find('input[name="jj"]').val(e.day),t(a).find('input[name="aa"]').val(e.year),t(a).find('input[name="hh"]').val(e.hour),t(a).find('input[name="mn"]').val(e.minute),e.hasOwnProperty("h_taxonomies")){var n=e.h_taxonomies;for(i=0;i<n.length;i++){var s="#"+n[i];t(a).find(s).prop("checked","checked")}}_(),t(a).show(),t(a).find(".np_datepicker").datepicker({beforeShow:function(){t("#ui-datepicker-div").addClass("nestedpages-datepicker")}}),e.hasOwnProperty("f_taxonomies")&&(h(e.f_taxonomies),m(a))}function h(t){var a={};for(i=0;i<t.length;i++){var e=t[i].split("-"),n=e.indexOf("nps"),s=e.splice(n+1);s=s.join("-");var d=t[i].split("-").splice(0,n);d.shift("inf");var o=d.join("-");o in a||(a[o]=[]);var r=a[o];r.push(s)}f(a)}function f(a){t.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:"npgetTaxonomies",nonce:nestedpages.np_nonce,terms:a},success:function(t){v(t.terms)}})}function v(a){a&&t.each(a,function(a,e){var n=t("#"+a);t(n).val(e.join(","))})}function m(a){var e=t(a).find("[data-autotag]");t.each(e,function(){var a=t(this).attr("data-taxonomy");t(this).suggest(ajaxurl+"?action=ajax-tag-search&tax="+a,{multiple:!0,multipleSep:","})})}function g(){t(".np-quickedit-error").hide(),k(),t(".sortable .quick-edit").remove(),t(".row").show()}function _(){t("body").append('<div class="np-inline-overlay"></div>'),setTimeout(function(){t(".np-inline-overlay").addClass("active")},50)}function k(){t(".np-inline-overlay").removeClass("active").remove()}function w(a){t(".np-quickedit-error").hide();var e=t(".np-sync-menu").is(":checked")?"sync":"nosync";t.ajax({url:ajaxurl,type:"post",datatype:"json",data:t(a).serialize()+"&action=npquickEdit&nonce="+nestedpages.np_nonce+"&syncmenu="+e+"&post_type="+n(),success:function(e){"error"===e.status?(q(a),t(a).find(".np-quickedit-error").text(e.message).show()):(q(a),b(a,e.post_data),D(a))},error:function(t){console.log(t)}})}function b(a,e){var n=t(a).parent(".quick-edit").siblings(".row");t(n).find(".title").text(e.post_title);var i=t(n).find(".status");if(t(i).text("publish"!==e._status&&"future"!==e._status?"("+e._status+")":"private"===e.keep_private?"("+e.keep_private+")":""),""!==e.post_password){var s=t(i).text();s+=' <i class="np-icon-lock"></i>',t(i).html(s)}var d=t(n).find(".nav-status");t(d).text("hide"==e.nav_status?"(Hidden)":"");var o=t(n).parent("li");"hide"==e.np_status?(t(o).addClass("np-hide"),t(n).find(".status").after('<i class="np-icon-eye-blocked"></i>')):(t(o).removeClass("np-hide"),t(n).find(".np-icon-eye-blocked").remove());var r=t(n).find(".np-quick-edit");t(r).attr("data-id",e.post_id),t(r).attr("data-template",e.page_template),t(r).attr("data-title",e.post_title),t(r).attr("data-slug",e.post_name),t(r).attr("data-commentstatus",e.comment_status),t(r).attr("data-status",e._status),"private"===e.keep_private&&t(r).attr("data-status","private"),t(r).attr("data-author",e.post_author),t(r).attr("data-np-status",e.np_status),t(r).attr("data-password",e.post_password),t(r).attr("data-navstatus",e.nav_status),t(r).attr("data-navtitle",e.np_nav_title),t(r).attr("data-linktarget",e.link_target),t(r).attr("data-navtitleattr",e.np_title_attribute),t(r).attr("data-navcss",e.np_nav_css_classes),t(r).attr("data-month",e.mm),t(r).attr("data-day",e.jj),t(r).attr("data-year",e.aa),t(r).attr("data-hour",e.hh),t(r).attr("data-minute",e.mn),t(r).attr("data-datepicker",e.np_date),t(r).attr("data-time",e.np_time),t(r).attr("data-formattedtime",e.np_time),t(r).attr("data-ampm",e.np_ampm),y(o),x(o,e),C(o,e),j(o,e)}function y(a){taxonomies=[];var e=t(a).attr("class").split(/\s+/);for(i=0;i<e.length;i++)"in-"===e[i].substring(0,3)&&t(a).removeClass(e[i]),"inf-"===e[i].substring(0,4)&&t(a).removeClass(e[i])}function x(a,e){if(e.hasOwnProperty("post_category")){var n=e.post_category;for(i=0;i<n.length;i++){var s="in-category-"+n[i];t(a).addClass(s)}}}function C(a,e){if(e.hasOwnProperty("tax_input")){var n=e.tax_input;t.each(n,function(e,n){for(i=0;i<n.length;i++){var s="in-"+e+"-"+n[i];t(a).addClass(s)}})}}function j(a,e){if(e.hasOwnProperty("flat_tax")){var n=e.flat_tax;t.each(n,function(e,n){for(i=0;i<n.length;i++){var s="inf-"+e+"-nps-"+n[i];t(a).addClass(s)}})}}function q(a){t(a).find(".np-save-quickedit, .np-save-quickedit-redirect, .np-save-newchild").removeAttr("disabled"),t(a).find(".np-qe-loading").hide()}function D(e){var n=t(e).parent(".quick-edit, .new-child").siblings(".row");t(n).addClass("np-updated"),t(n).show(),t(e).parent(".quick-edit, .new-child").remove(),k(),a(),setTimeout(function(){t(n).addClass("np-updated-show")},1500)}function T(a){var e={id:t(a).attr("data-id"),url:t(a).attr("data-url"),title:t(a).attr("data-title"),status:t(a).attr("data-status"),navstatus:t(a).attr("data-navstatus"),npstatus:t(a).attr("data-np-status"),linktarget:t(a).attr("data-linktarget"),parentid:t(a).attr("data-parentid"),navtitleattr:t(a).attr("data-navtitleattr"),navcss:t(a).attr("data-navcss")},n=t(a).closest(".row").parent("li");if(t(n).children("ol").length>0)var i=t(n).children("ol"),s=t(".quick-edit-form-redirect").clone().insertBefore(i);else var s=t(".quick-edit-form-redirect").clone().appendTo(n);t(s).siblings(".row").hide();t(s).show(),A(s,e)}function A(a,e){t(a).find(".np_id").val(e.id),t(a).find(".np_title").val(e.title),t(a).find(".np_author select").val(e.author),t(a).find(".np_status").val(e.status),t(a).find(".np_content").val(e.url),t(a).find(".np_parent_id").val(e.parentid),t(a).find(".np_title_attribute").val(e.navtitleattr),t(a).find(".np_nav_css_classes").val(e.navcss),"hide"===e.npstatus?t(a).find(".np_status").prop("checked","checked"):t(a).find(".np_status").removeAttr("checked"),"hide"===e.navstatus?t(a).find(".np_nav_status").prop("checked","checked"):t(a).find(".np_nav_status").removeAttr("checked"),"_blank"===e.linktarget?t(a).find(".link_target").prop("checked","checked"):t(a).find(".link_target").removeAttr("checked"),_(),t(a).show()}function O(a){t(".np-quickedit-error").hide();var e=t(".np-sync-menu").is(":checked")?"sync":"nosync";t.ajax({url:ajaxurl,type:"post",datatype:"json",data:t(a).serialize()+"&action=npquickEditLink&nonce="+nestedpages.np_nonce+"&syncmenu="+e+"&post_type="+n(),success:function(e){"error"===e.status?(q(a),t(a).find(".np-quickedit-error").text(e.message).show()):(q(a),P(a,e.post_data),D(a))},error:function(){q(a),t(a).find(".np-quickedit-error").text("The form could not be saved at this time.").show()}})}function P(a,e){var n=t(a).parent(".quick-edit").siblings(".row");t(n).find(".title").html(e.post_title+' <i class="np-icon-link"></i>');var i=t(n).find(".status");t(i).text("publish"!==e._status&&"future"!==e._status?"("+e._status+")":"");var s=t(n).find(".nav-status");t(s).text("hide"==e.nav_status?"(Hidden)":"");var d=t(n).parent("li");"hide"==e.np_status?(t(d).addClass("np-hide"),t(n).find(".status").after('<i class="np-icon-eye-blocked"></i>')):(t(d).removeClass("np-hide"),t(n).find(".np-icon-eye-blocked").remove());var o=t(n).find(".np-quick-edit-redirect");t(o).attr("data-id",e.post_id),t(o).attr("data-title",e.post_title),t(o).attr("data-url",e.post_content),t(o).attr("data-status",e._status),t(o).attr("data-navstatus",e.nav_status),t(o).attr("data-np-status",e.np_status),t(o).attr("data-linktarget",e.link_target),t(o).attr("data-navtitleattr",e.np_title_attribute),t(o).attr("data-navcss",e.np_nav_css_classes)}function E(){t(".np-link-loading").hide(),t(".np-save-link").removeAttr("disabled")}function I(){t(".np-new-link-error").hide();var a=t(".np-new-link-form").serialize(),e=t(".np-sync-menu").is(":checked")?"sync":"nosync";t.ajax({url:ajaxurl,type:"post",datatype:"json",data:a+"&action=npnewLink&nonce="+nestedpages.np_nonce+"&syncmenu="+e+"&post_type="+n(),success:function(a){"error"===a.status?(E(),t(".np-new-link-error").text(a.message).show()):(E(),L(a.post_data))}})}function L(a){var e='<li id="menuItem_'+a.id+'" class="page-row';"publish"===a._status&&(e+=" published"),e+='">',e+='<div class="row"><div class="child-toggle"></div><div class="row-inner"><i class="np-icon-sub-menu"></i><i class="handle np-icon-menu"></i><a href="'+a.np_link_content+'" class="page-link page-title" target="_blank"><span class="title">'+a.np_link_title+' <i class="np-icon-link"></i></span>',e+="publish"!==a._status?'<span class="status">'+a._status+"</span>":'<span class="status"></span>',"hide"===a.np_status&&(e+='<i class="np-icon-eye-blocked"></i>'),e+="hide"===a.nav_status?'<span class="nav-status">(Hidden)</span>':'<span class="nav-status"></span>',e+='</a><a href="#" class="np-toggle-edit"><i class="np-icon-pencil"></i></a><div class="action-buttons"><a href="#" class="np-btn np-quick-edit-redirect" ',e+='data-id="'+a.id+'"',e+='data-parentid="'+a.parent_id+'"',e+='data-title="'+a.np_link_title+'" ',e+='data-url="'+a.np_link_content+'" ',e+='data-status="'+a._status+'" ',e+='data-np-status="'+a.np_status+'" ',e+='data-navstatus="'+a.nav_status+'" ',e+='data-linktarget="'+a.link_target+'">',e+="Quick Edit</a>",e+='<a href="'+a.delete_link+'" class="np-btn np-btn-trash"><i class="np-icon-remove"></i></a>',e+="</div></div></div></li>","0"===a.parent_id?t(".nplist:first li:first").after(e):z(e,a),t("#np-link-modal").modal("hide");var n=t("#menuItem_"+a.id).find(".row");H(n)}function z(a,e){var n=t("#menuItem_"+e.parent_id);0===t(n).children("ol").length?(a='<ol class="sortable nplist" style="display:block;">'+a+"</ol>",t(n).append(a)):t(n).find("ol:first").prepend(a),r(),B()}function H(e){t(e).addClass("np-updated"),a(),setTimeout(function(){t(e).addClass("np-updated-show")},1500)}function S(){var a=[],e=t(".page-row:visible");return t.each(e,function(){var e=t(this).attr("id");a.push(e.replace("menuItem_",""))}),a}function B(){var a=S(),e=n();t.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:"npnestToggle",nonce:nestedpages.np_nonce,ids:a,posttype:e},success:function(t){"success"!==t.status&&console.log("There was an error saving toggled pages.")}})}function Q(){t(".np-newchild-error").hide(),k(),t("#np-bulk-modal .modal-body").empty(),t(".sortable .new-child").remove(),t(".row").show()}function M(a){var e=t(a).closest(".row").parent("li");if(t(e).children("ol").length>0)var n=t(e).children("ol"),i=t(".new-child-form").not(".np-modal .new-child-form").clone().insertBefore(n);else var i=t(".new-child-form").not(".np-modal .new-child-form").clone().appendTo(e);t(i).siblings(".row").hide();_(),t(i).find(".parent_name").html("<em>Parent:</em> "+t(a).attr("data-parentname")),t(i).find(".page_parent_id").val(t(a).attr("data-id")),t(i).show()}function F(a){{var e='<li><i class="handle np-icon-menu"></i><div class="form-control new-child-row"><label>'+nestedpages.title+'</label><div><input type="text" name="post_title[]" class="np_title" placeholder="'+nestedpages.title+'" value="" /><a href="#" class="button-secondary np-remove-child">-</a></div></div></li>';t(a).siblings(".new-page-titles").append(e)}t(".new-page-titles").sortable({items:"li",handle:".handle"})}function G(a){var e=t(a).find(t(".new-child-row")).length;e>1?(t(a).find(".add-edit").hide(),t(a).find("h3 strong").text(nestedpages.add_child_pages),t(a).find(".np-save-newchild").text(nestedpages.add+" ("+e+")")):(t(a).find(".add-edit").show(),t(a).find("h3 strong").text(nestedpages.add_child),t(a).find(".np-save-newchild").text(nestedpages.add))}function J(a,e){t(".np-quickedit-error").hide();var i=t(".np-sync-menu").is(":checked")?"sync":"nosync";t.ajax({url:ajaxurl,type:"post",datatype:"json",data:t(a).serialize()+"&action=npnewChild&nonce="+nestedpages.np_nonce+"&syncmenu="+i+"&post_type="+n(),success:function(n){if("error"===n.status)q(a),t(a).find(".np-quickedit-error").text(n.message).show();else if(e===!0){var i=n.new_pages[0].edit_link;i=i.replace(/&amp;/g,"&"),window.location.replace(i)}else q(a),K(a,n)},error:function(){q(a),t(a).find(".np-quickedit-error").text("The form could not be saved at this time.").show()}})}function K(a,e){var n=e.new_pages,s=t(a).parent(".new-child").parent(".page-row");if(0===t(s).children("ol").length&&t(s).append('<ol class="nplist"></ol>'),t(a).hasClass("in-modal"))var d=t(".nplist.sortable li.page-row:first");else var d=t(s).children("ol");for(i=0;i<n.length;i++)N(d,n[i]);t(d).show(),r(),Q(),t("#np-bulk-modal").modal("hide"),D(a)}function N(a,e){var i='<li id="menuItem_'+e.id+'" class="page-row';"publish"===e.status&&(i+=" published"),i+='">',0===s(n())?(i+='<div class="row">',i+='<div class="child-toggle"></div>'):i+='<div class="row non-hierarchical">',i+='<div class="row-inner">',i+='<i class="np-icon-sub-menu"></i><i class="handle np-icon-menu"></i>',i+='<a href="'+e.edit_link+'" class="page-link page-title">',i+='<span class="title">'+e.title+"</span>",i+="Publish"!==e.status?'<span class="status">('+e.status+")</span>":'<span class="status"></span>',i+='<span class="nav-status"></span><span class="edit-indicator"><i class="np-icon-pencil"></i>Edit</span>',i+="</a>",i+='<div class="action-buttons">',i+='<a href="#" class="np-btn open-redirect-modal" data-parentid="'+e.id+'"><i class="np-icon-link"></i></a>',i+='<a href="#" class="np-btn add-new-child" data-id="'+e.id+'" data-parentname="'+e.title+'">'+nestedpages.add_child_short+"</a>",i+='<a href="#" class="np-btn np-quick-edit" data-id="'+e.id+'" data-template="'+e.page_template+'" data-title="'+e.title+'" data-slug="'+e.slug+'" data-commentstatus="closed" data-status="'+e.status.toLowerCase()+'" data-np-status="show"	data-navstatus="show" data-author="'+e.author+'" data-template="'+e.template+'" data-month="'+e.month+'" data-day="'+e.day+'" data-year="'+e.year+'" data-hour="'+e.hour+'" data-minute="'+e.minute+'" data-datepicker="'+e.datepicker+'" data-time="'+e.time+'" data-formattedtime="'+e.formattedtime+'" data-ampm="'+e.ampm+'">'+nestedpages.quick_edit+"</a>",i+='<a href="'+e.view_link+'" class="np-btn" target="_blank">'+nestedpages.view+"</a>",i+='<a href="'+e.delete_link+'" class="np-btn np-btn-trash"><i class="np-icon-remove"></i></a>',i+="</div><!-- .action-buttons -->",i+="</div><!-- .row-inner --></div><!-- .row -->",i+="</li>",t(a).append(i)}function R(a){t.ajax({url:ajaxurl,type:"post",datatype:"json",data:{action:"npEmptyTrash",nonce:nestedpages.np_nonce,posttype:a},success:function(a){t("#nested-loading").hide(),"error"===a.status?t("#np-error").text(a.message).show():t(".np-trash-links").hide()}})}function U(a){var e=t(".page-row .title");t(".page-row").hide(),t.each(e,function(){var e=t(this).text().toLowerCase();e.indexOf(a)>-1&&t(this).parents(".page-row").show()})}function V(){t(".page-row").show()}t(document).ready(function(){r(),a(),e()}),t(document).on("click",".child-toggle a",function(n){n.preventDefault();var i=t(this).parent(".child-toggle").parent(".row").siblings("ol");t(this).find("i").toggleClass("np-icon-arrow-down").toggleClass("np-icon-arrow-right"),t(i).toggle(),a(),B(),e()}),t(document).on("click",".nestedpages-toggleall a",function(e){e.preventDefault(),"closed"==t(this).attr("data-toggle")?(t(".nestedpages ol li ol").show(),t(this).attr("data-toggle","opened"),t(this).text(nestedpages.collapse_text),t(".child-toggle i").removeClass("np-icon-arrow-right").addClass("np-icon-arrow-down"),g(),a()):(t(".nestedpages ol li ol").hide(),t(this).attr("data-toggle","closed"),t(this).text(nestedpages.expand_text),t(".child-toggle i").removeClass("np-icon-arrow-down").addClass("np-icon-arrow-right"),g(),a()),B()}),t(document).on("click",".np-toggle-hidden",function(e){e.preventDefault();var n=t(this).attr("href");"show"===n?(t(this).attr("href","hide"),t(this).text(nestedpages.show_hidden),t(".np-hide").removeClass("shown").hide(),a()):(t(this).attr("href","show"),t(this).text(nestedpages.hide_hidden),t(".np-hide").addClass("shown").show(),a())}),t(".np-tabs a").on("click",function(a){a.preventDefault(),t(".np-tabs a").removeClass("active"),t(this).addClass("active");var e=t(this).attr("href");t(".np-tabbed-content").hide(),t(e).show()}),t(document).on("click",".np-toggle-publish",function(a){a.preventDefault();var e=t(this).attr("href");t(".np-toggle-publish").removeClass("active"),t(this).addClass("active"),"#published"==e?(t(".nplist .page-row").hide(),t(".nplist .published").show()):t(".nplist .page-row").show()}),t(document).on("click",".np-toggle-edit",function(a){a.preventDefault();var e=t(this).siblings(".action-buttons");t(e).is(":visible")?(t(this).removeClass("active"),t(e).hide()):(t(this).addClass("active"),t(e).show())});var W=function(){var t=0;return function(a,e){clearTimeout(t),t=setTimeout(a,e)}}();t(window).resize(function(){W(function(){t(".action-buttons").removeAttr("style"),t(".np-toggle-edit").removeClass("active")},500)}),t(document).ready(function(){t(".sortable").not(".no-sort").nestedSortable({items:".page-row",toleranceElement:"> .row",handle:".handle",placeholder:"ui-sortable-placeholder",maxLevels:s(n()),start:function(t,a){a.placeholder.height(a.item.height())},sort:function(t,a){d(a)},stop:function(){setTimeout(function(){r(),a(),e()},100),l()}})}),t(document).ready(function(){"1"===nestedpages.syncmenu&&p("sync")}),t(".np-sync-menu").on("change",function(){var a=t(this).is(":checked")?"sync":"nosync";p(a)}),t(document).on("click",".np-quick-edit",function(a){a.preventDefault(),g(),c(t(this))}),t(document).on("click",".np-inline-overlay",function(){g(),Q()}),t(document).on("click",".np-cancel-quickedit",function(a){var e=t(this).parents(".page-row");g(e),a.preventDefault()}),t(document).on("click",".np-save-quickedit",function(a){a.preventDefault(),t(".row").removeClass("np-updated").removeClass("np-updated-show");var e=t(this).parents("form");t(this).attr("disabled","disabled"),t(e).find(".np-qe-loading").show(),w(e)}),t(document).on("click",".np-toggle-taxonomies",function(a){t(this).parents("form").find(".np-taxonomies").toggle(),a.preventDefault()}),t(document).on("click",".np-toggle-menuoptions",function(a){a.preventDefault(),t(this).parents("form").find(".np-menuoptions").toggle()}),t(document).on("change",".keep_private",function(){this.checked?t(".post_password").val("").prop("readonly",!0):t(".post_password").prop("readonly",!1)}),t(document).on("click",".np-quick-edit-redirect",function(a){a.preventDefault(),g(),T(t(this))}),t(document).on("click",".np-save-quickedit-redirect",function(a){a.preventDefault(),t(".row").removeClass("np-updated").removeClass("np-updated-show");var e=t(this).parents("form");t(this).attr("disabled","disabled"),t(e).find(".np-qe-loading").show(),O(e)}),t(document).on("click",".open-redirect-modal",function(a){a.preventDefault();var e=t(this).attr("data-parentid");t("#np-link-modal").find("input").val(""),t("#np-link-modal .parent_id").val(e),t("#np-add-link-title").text("0"===e?nestedpages.add_link:nestedpages.add_child_link),t("#np-link-modal").modal("show")}),t(document).on("click",".np-save-link",function(a){a.preventDefault(),t(".np-new-link-error").hide(),t(".np-link-loading").show(),t(this).attr("disabled","disabled"),I()}),t("#np-bulk-modal").on("hide.bs.modal",function(){Q()}),t(document).on("click",".np-cancel-newchild",function(a){a.preventDefault(),Q(),t("#np-bulk-modal").modal("hide")}),t(document).on("click",".add-new-child",function(a){a.preventDefault(),M(t(this))}),t(document).on("click",".open-bulk-modal",function(a){a.preventDefault();var e=t(".new-child-form").clone().find(".np-new-child-form").addClass("in-modal");t("#np-bulk-modal .modal-body").html(e),t("#np-bulk-modal .new-child-form").show(),t("#np-bulk-modal").find("h3").text(nestedpages.add_multiple),t("#np-bulk-modal").find(".page_parent_id").val("0"),t("#np-bulk-modal").modal("show")}),t(document).on("click",".add-new-child-row",function(a){a.preventDefault(),F(t(this));var e=t(this).parents("form");G(e)}),t(document).on("click",".np-remove-child",function(a){a.preventDefault();var e=t(this).parents("form");t(this).parents(".new-child-row").parent("li").remove(),G(e)}),t(document).on("submit",".np-new-child-form",function(t){t.preventDefault()}),t(document).on("click",".np-save-newchild",function(a){a.preventDefault(),t(this).prop("disabled","disabled");var e=t(this).parents("form");t(e).find(".np-qe-loading").show();var n=t(this).hasClass("add-edit")?!0:!1;J(e,n)}),t(".np-empty-trash").on("click",function(a){a.preventDefault(),t("#nested-loading").show(),t("#np-error").hide();var e=t(this).attr("data-posttype");window.confirm(nestedpages.trash_confirm)&&R(e)}),t(document).on("keyup","#nestedpages-search",function(){var a=t(this).val().toLowerCase();return a.length>2?void U(a):void V()})});